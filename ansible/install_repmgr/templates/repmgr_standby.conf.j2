node_id = 2
node_name = 'node2'
conninfo = 'host=192.168.10.20 user=repmgr dbname=repmgr'
data_directory = '/var/lib/postgresql/16/main'

# Репликация
use_replication_slots = yes

# Управление PostgreSQL-сервисом
pg_bindir = '/usr/lib/postgresql/16/bin'
service_start_command   = 'sudo pg_ctlcluster 16 main start'
service_stop_command    = 'sudo pg_ctlcluster 16 main stop'
service_restart_command = 'sudo pg_ctlcluster 16 main restart'
service_reload_command  = 'sudo pg_ctlcluster 16 main reload'

# Failover и follow
failover = automatic
promote_command = 'repmgr standby promote -f /etc/repmgr.conf'
follow_command  = 'repmgr standby follow -f /etc/repmgr.conf'

# Мониторинг состояния кластера
monitoring_history      = yes
monitor_interval_secs   = 2
log_status_interval     = 60
promote_check_timeout   = 10
promote_check_interval  = 2
reconnect_attempts      = 2
reconnect_interval      = 2

# Приоритет выбора standby при failover (чем выше, тем предпочтительнее)
priority = 100

# Логирование
log_level = INFO
log_file  = '/var/log/postgresql/repmgr.log'
